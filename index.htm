<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Local Multiplayer Game</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        #game {
            position: relative;
            width: 800px;
            height: 600px;
            border: 2px solid #000;
            background-color: lightgray;
        }
        .player {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: red;
        }
        #player1 {
            background-color: red;
        }
        #player2 {
            background-color: blue;
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="player1" class="player"></div>
        <div id="player2" class="player"></div>
    </div>

    <script>
        const gameArea = document.getElementById('game');
        const player1 = document.getElementById('player1');
        const player2 = document.getElementById('player2');

        // موقعیت پیش‌فرض بازیکنان
        let player1Pos = { x: 100, y: 100 };
        let player2Pos = { x: 200, y: 200 };

        // بارگذاری موقعیت بازیکن 1 از localStorage
        if (localStorage.getItem('player1Pos')) {
            player1Pos = JSON.parse(localStorage.getItem('player1Pos'));
        }
        if (localStorage.getItem('player2Pos')) {
            player2Pos = JSON.parse(localStorage.getItem('player2Pos'));
        }

        // موقعیت بازیکنان را به روز رسانی کنید
        function updatePlayerPositions() {
            player1.style.left = player1Pos.x + 'px';
            player1.style.top = player1Pos.y + 'px';
            player2.style.left = player2Pos.x + 'px';
            player2.style.top = player2Pos.y + 'px';
        }
        updatePlayerPositions();

        // کنترل بازیکن 1 با کلیدهای W, A, S, D
        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'w':
                    player1Pos.y -= 5;
                    break;
                case 's':
                    player1Pos.y += 5;
                    break;
                case 'a':
                    player1Pos.x -= 5;
                    break;
                case 'd':
                    player1Pos.x += 5;
                    break;
                case 'ArrowUp':
                    player2Pos.y -= 5;
                    break;
                case 'ArrowDown':
                    player2Pos.y += 5;
                    break;
                case 'ArrowLeft':
                    player2Pos.x -= 5;
                    break;
                case 'ArrowRight':
                    player2Pos.x += 5;
                    break;
            }
            // به‌روزرسانی موقعیت‌ها
            updatePlayerPositions();
            // ذخیره موقعیت‌ها در localStorage
            localStorage.setItem('player1Pos', JSON.stringify(player1Pos));
            localStorage.setItem('player2Pos', JSON.stringify(player2Pos));
        });
    </script>
</body>
</html>
